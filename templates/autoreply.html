<html>
    <head>
        <title>SharkBot v2 | AutoReply</title>
        <style>
            body {
                margin: 0;
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                background-color: #2f3136;
                color: #ffffff;
                display: flex;
                justify-content: center;
                align-items: flex-start;
                min-height: 100vh;
                padding: 2rem;
            }

            .settings-box {
                background-color: #36393f;
                padding: 2rem;
                border-radius: 15px;
                width: 100%;
                max-width: 800px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            }

            h1 {
                margin-bottom: 1rem;
                font-size: 1.6rem;
                color: #ffffff;
                text-align: center;
            }

            .guild-header {
                display: flex;
                align-items: center;
                margin-bottom: 2rem;
            }

            .guild-header img {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                margin-right: 1rem;
                border: 3px solid #5865f2;
                background-color: #2f3136;
            }

            .form-group {
                margin-bottom: 1.5rem;
            }

            label {
                display: block;
                font-weight: bold;
                margin-bottom: 0.5rem;
                color: #cccccc;
            }

            input[type="text"],
            textarea {
                width: 100%;
                padding: 0.8rem;
                border: none;
                border-radius: 8px;
                background-color: #202225;
                color: #ffffff;
                font-size: 1rem;
            }

            textarea {
                resize: vertical;
                min-height: 80px;
            }

            button {
                background-color: #5865f2;
                border: none;
                border-radius: 8px;
                padding: 0.6rem 1.2rem;
                color: #ffffff;
                font-size: 0.95rem;
                font-weight: bold;
                cursor: pointer;
                transition: background 0.2s ease;
            }

            button:hover {
                background-color: #4752c4;
            }

            .actions {
                text-align: right;
                margin-top: 2rem;
            }

            /* ====== リスト部分 ====== */
            .reply-list {
                margin-top: 2rem;
            }

            .reply-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                background-color: #2f3136;
                border-radius: 10px;
                padding: 1rem;
                margin-bottom: 1rem;
            }

            .reply-text {
                max-width: 65%;
            }

            .reply-text strong {
                color: #4cafef;
            }

            .reply-actions {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            /* スイッチ */
            .switch {
                position: relative;
                display: inline-block;
                width: 50px;
                height: 28px;
            }
            .switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }
            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                transition: 0.4s;
                border-radius: 34px;
            }
            .slider:before {
                position: absolute;
                content: "";
                height: 20px;
                width: 20px;
                left: 4px;
                bottom: 4px;
                background-color: white;
                transition: 0.4s;
                border-radius: 50%;
            }
            input:checked + .slider {
                background-color: #4caf50;
            }
            input:checked + .slider:before {
                transform: translateX(22px);
            }
        </style>
    </head>

    <body>
        <div class="settings-box">
            <div class="guild-header">
                <img src="https://cdn.discordapp.com/icons/{{ guild.id }}/{{ guild.icon }}.png?size=128" alt="Guild Icon">
                <h1>{{ guild.name }} の自動返信</h1>
            </div>

            <!-- 既存リスト -->
            <div class="reply-list">
                {% for ch in autos %}
                <div class="reply-item">
                    <div class="reply-text">
                        <p><strong>トリガー:</strong> {{ ch.Word }}</p>
                        <p><strong>返信:</strong> {{ ch.ReplyWord }}</p>
                    </div>
                    <div class="reply-actions">
                        <form method="post" action="/settings/{{ guild.id }}/autoreply_delete/{{ ch.id }}">
                            <input value="{{ch.Word}}" name="tri" hidden>
                            <button type="submit">削除</button>
                        </form>
                    </div>
                </div>
                {% else %}
                <p>まだ自動返信は設定されていません。</p>
                {% endfor %}
            </div>

            <form method="post" action="/settings/{{ guild.id }}/autoreply_set"> 
                <div class="form-group">
                    <label for="tri">反応する言葉</label>
                    <input type="text" id="tri" name="tri" placeholder="例: こんにちは">
                </div>

                <div class="form-group">
                    <label for="reply">返信する言葉</label>
                    <textarea id="reply" name="reply" placeholder="例: こんにちは！"></textarea>
                </div>

                <div class="actions">
                    <button type="submit">追加する</button>
                </div>
            </form>
        </div>
    </body>
</html>